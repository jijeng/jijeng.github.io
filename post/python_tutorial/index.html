<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Python Tutorial - Jijeng&#39;s Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="jijeng" /><meta name="description" content="python 学习笔记
" /><meta name="keywords" content="Hugo, theme, even" />






<meta name="generator" content="Hugo 0.79.1 with theme even" />


<link rel="canonical" href="http://jijeng.github.io/post/python_tutorial/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.c7bc1becf36bcf6a9ebd25d2947e43a2eb745ddb0c9a32b43126fd7fa460c351.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Python Tutorial" />
<meta property="og:description" content="python 学习笔记" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://jijeng.github.io/post/python_tutorial/" />
<meta property="article:published_time" content="2019-01-09T10:15:33+08:00" />
<meta property="article:modified_time" content="2019-01-09T10:15:33+08:00" />
<meta itemprop="name" content="Python Tutorial">
<meta itemprop="description" content="python 学习笔记">
<meta itemprop="datePublished" content="2019-01-09T10:15:33+08:00" />
<meta itemprop="dateModified" content="2019-01-09T10:15:33+08:00" />
<meta itemprop="wordCount" content="13338">



<meta itemprop="keywords" content="python," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Python Tutorial"/>
<meta name="twitter:description" content="python 学习笔记"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Jijeng&#39;s Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Jijeng&#39;s Blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Python Tutorial</h1>

      <div class="post-meta">
        <span class="post-time"> 2019-01-09 </span>
        <div class="post-category">
            <a href="/categories/tutorial/"> tutorial </a>
            <a href="/categories/programming-language/"> programming language </a>
            </div>
          <span class="more-meta"> 约 13338 字 </span>
          <span class="more-meta"> 预计阅读 27 分钟 </span>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#basic-skills">Basic Skills</a>
          <ul>
            <li><a href="#module">module</a></li>
            <li><a href="#packages">packages</a></li>
            <li><a href="#python-path">python-path</a></li>
            <li><a href="#while-or-for">while or for</a></li>
            <li><a href="#break-continue-or-pass">break, continue, or pass</a></li>
            <li><a href="#yield-or-return">yield or return</a></li>
            <li><a href="#recursion">recursion</a></li>
            <li><a href="#list-tuples-or-dictionary">list, tuples, or dictionary</a></li>
            <li><a href="#iterators">Iterators</a></li>
          </ul>
        </li>
        <li><a href="#shallow-vs-deep-copy">shallow vs deep copy</a>
          <ul>
            <li><a href="#object-oriented-design">object oriented design</a></li>
            <li><a href="#garbage-collection">garbage collection</a></li>
            <li><a href="#trycatch">try&hellip;catch</a></li>
            <li><a href="#内置函数中的-all-和-any">内置函数中的 all() 和 any()</a></li>
            <li><a href="#sort-sorted-函数">sort() sorted() 函数</a></li>
          </ul>
        </li>
        <li><a href="#python-operators">python operators</a></li>
        <li><a href="#working-with-files">Working with files</a></li>
        <li><a href="#输入和输出函数">输入和输出函数</a>
          <ul>
            <li><a href="#输入函数">输入函数</a></li>
            <li><a href="#string-formatting-syntax">String Formatting Syntax</a></li>
          </ul>
        </li>
        <li><a href="#面向对象-for-python">面向对象 (for python)</a>
          <ul>
            <li><a href="#python-中的三类方法">python 中的三类方法</a></li>
            <li><a href="#python-中的单例-多例模式">python 中的单例/ 多例模式</a></li>
          </ul>
        </li>
        <li><a href="#数据处理函数">数据处理函数</a></li>
        <li><a href="#库函数">库函数</a></li>
        <li><a href="#python-中的数据结构dict-和set-类型">python 中的数据结构Dict 和Set 类型</a></li>
        <li><a href="#其他">其他</a>
          <ul>
            <li><a href="#dictionary总结">dictionary总结</a></li>
            <li><a href="#set-总结">set 总结</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>python 学习笔记</p>
<h2 id="basic-skills">Basic Skills</h2>
<h3 id="module">module</h3>
<p>python 文件可以当做主文件进行运行或者当做函数的集合进行调用。如果是前者一般是需要包含&quot;_<em>name</em>_ ==&quot;__main__&quot;。对于后者就是在其他的python文件中进行调用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="kn">import</span> <span class="nn">my_module</span> <span class="c1"># python文件</span>
    <span class="kn">from</span> <span class="nn">my_module</span> <span class="kn">import</span> <span class="n">my_object</span> 
</code></pre></td></tr></table>
</div>
</div><h3 id="packages">packages</h3>
<pre><code>from packageroot.packagefolder.mod import my_object
</code></pre>
<p>Note: Ensure each directory within your package import contains a file _<em>init</em>_.py</p>
<h3 id="python-path">python-path</h3>
<p>python2 和python3 使用不同的解释器，导致在一些函数命名和计算上有一些差别，最好在文件的开头标明使用的解释器。</p>
<h3 id="while-or-for">while or for</h3>
<p>while : provide a condition and run the loop until the condition is not met.</p>
<p>for: loop for a number of specific times; loop over items or characters of a string.</p>
<p>examples:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="p">[</span><span class="n">Variable</span><span class="p">]</span> <span class="n">AggregateFunction</span><span class="p">([</span><span class="n">Value</span><span class="p">]</span> <span class="k">for</span> <span class="p">[</span><span class="n">item</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="n">collection</span><span class="p">])</span>
    <span class="n">x</span> <span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">=</span><span class="p">[</span> <span class="mi">2</span><span class="o">*</span><span class="n">a</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">x</span> <span class="k">if</span> <span class="n">a</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">y</span> <span class="o">&gt;&gt;</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>或者可以使用这样更加简洁的语句：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="k">lambda</span> <span class="n">arguments</span> <span class="p">:</span> <span class="n">expression</span>
    <span class="n">fun1</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="p">:</span> <span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">+</span><span class="n">c</span>
    <span class="k">print</span><span class="p">(</span><span class="n">fun1</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>来个比较复杂的例子:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">nums</span> <span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span>
    <span class="n">letters</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span><span class="s1">&#39;d&#39;</span><span class="p">,</span><span class="s1">&#39;e&#39;</span><span class="p">]</span>
    <span class="c1"># 两个for 循环也是要熟练</span>
    <span class="n">nums_letters</span> <span class="o">=</span><span class="p">[[</span><span class="n">n</span><span class="p">,</span> <span class="n">l</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">nums</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">letters</span> <span class="p">]</span>
    <span class="n">nums_letters</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="break-continue-or-pass">break, continue, or pass</h3>
<p>这三个关键词是python 语言中的循环控制。总结说，break 是跳出”整个“循环，continue 是跳出”本次“循环， pass 是不做任何事情，表达语义的完整，这个类似 Todo 项目，提醒自己之后需要完成这部分程序功能。ß</p>
<p>The break, continue, and pass statements in Python will allow you to use for loops and while loops more effectively in your code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">number</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">number</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
       <span class="n">number</span> <span class="o">=</span> <span class="n">number</span> <span class="o">+</span> <span class="mi">1</span>
    
       <span class="k">if</span> <span class="n">number</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
          <span class="k">pass</span>    <span class="c1"># pass here</span>
    
       <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Number is &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>
    
    <span class="k">print</span><span class="p">(</span><span class="s1">&#39;Out of loop&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>pass 关键词的作用：</p>
<ol>
<li>空语句 do nothing</li>
<li>保证格式完整</li>
<li>保证语义完整</li>
</ol>
<p>简单来说就是占位，没有什么实质性的内容。</p>
<p>The pass statement occurring after the if conditional statement is telling the program to continue to run the loop and ignore the fact that the variable number evaluates as equivalent to 5 during one of its iterations.</p>
<p>yield 可以用用作新的 if的测试, return results without termination</p>
<p>The pass statement can create minimal classes, or act as a placeholder when working on new code and thinking on an algorithmic level before hammering out details.
pass 的存在就是占坑，否则这个地方就是报错（IndentationError）。用于想要扩展的地方，但是现在还没有扩展。比如在某个method 下面或者某个 if 条件下。</p>
<h3 id="yield-or-return">yield or return</h3>
<p>yield 经常被用来作为生成器，返回但是却没有解决函数，下一回从上一回的位置开始。</p>
<p>when you call a normal function with a return statement the function is terminated whenever it encounters a return statement. In a function with a yield statement the state of the function is &lsquo;saved&rsquo; from the last call and can be picked up the next time you call a generator function.</p>
<p>for examples</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">gen_exp</span> <span class="o">=</span><span class="p">(</span><span class="n">x</span> <span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="k">if</span> <span class="n">x</span> <span class="o">%</span><span class="mi">2</span> <span class="o">==</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">gen_exp</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">my_gen</span><span class="p">():</span>
      <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
        <span class="k">yield</span> <span class="n">x</span>
    
    <span class="n">gen1</span> <span class="o">=</span><span class="n">my_gen</span><span class="p">()</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">gen1</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="nf">my_generator1</span><span class="p">():</span>
      <span class="k">yield</span> <span class="mi">1</span>
      <span class="k">yield</span> <span class="mi">2</span>
      <span class="k">yield</span> <span class="mi">3</span>
      
    <span class="n">my_gen</span> <span class="o">=</span><span class="n">my_generator1</span><span class="p">()</span>
    <span class="c1"># 使用 next() 进行调用下一个</span>
    <span class="nb">next</span><span class="p">(</span><span class="n">my_gen</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="recursion">recursion</h3>
<p>A function calling itself is known as recursion.（ recursion 是递归， iteration 是循环）</p>
<h3 id="list-tuples-or-dictionary">list, tuples, or dictionary</h3>
<p>在python 中是使用频繁的data structure，这个是属于 collection 类别，里面放的是element.</p>
<p>list: to add/update/ delete an item of a collection</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">my_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span> <span class="c1">#adds at the end</span>
    <span class="n">my_list</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;D&#39;</span> <span class="c1">#update</span>
    <span class="n">my_list</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># removes</span>
    
    <span class="n">mylist</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="c1"># 默认就是类似 栈的结构，就是pop 出来最后一个</span>
    <span class="n">mylist</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># 当然也可以根据index 指定特定的 pop(delete) 的element</span>
</code></pre></td></tr></table>
</div>
</div><p>对于index 的访问，一定要保证有相应的size() 长度，然后再进行index 的访问</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="k">del</span> <span class="n">mylist</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># 通过指定 index range 然后进行del</span>
    <span class="n">mylist</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span> <span class="c1"># 支持 sorting 然后是从小到大, 这个sort是一种操作，inplace 的操作</span>
</code></pre></td></tr></table>
</div>
</div><p>tuples: tuples store a sequence of objects, the object can be of any type. Tuples are faster than lists.</p>
<p>dictionary: It stores key/value pair objects.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">my_dict</span> <span class="o">=</span><span class="nb">dict</span><span class="p">()</span>
    <span class="n">my_dict</span><span class="p">[</span><span class="s1">&#39;key&#39;</span><span class="p">]</span> <span class="o">=</span><span class="s1">&#39;value&#39;</span>
    <span class="ow">or</span> 
    <span class="n">my_dict</span> <span class="o">=</span><span class="p">{</span><span class="s1">&#39;key&#39;</span><span class="p">:</span> <span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="o">...</span><span class="p">}</span>
    
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">my_dict</span><span class="p">:</span>
    <span class="c1"># do something</span>
    <span class="k">if</span> <span class="s1">&#39;some key&#39;</span> <span class="ow">in</span> <span class="n">my_dict</span><span class="p">:</span>
    <span class="c1"># do something</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="iterators">Iterators</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">yrange</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">n</span> <span class="o">=</span> <span class="n">n</span>

    <span class="c1"># 这个表明是一个 iterator，make an object iterable</span>
    <span class="k">def</span> <span class="fm">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># 这个next 函数就被当做是 class的属性，可以被外部调用的，</span>
    <span class="k">def</span> <span class="nf">next</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">n</span><span class="p">:</span>
            <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">i</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">return</span> <span class="n">i</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">StopIteration</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="shallow-vs-deep-copy">shallow vs deep copy</h2>
<p>python3 中：
对于简单的数据类型，像int ，string，这种 copy() 和copy.deepcopy() 这两者都是相同的，copy 都是一种映射，都是相当于”值“ 上的引用；</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">aa</span> <span class="o">=</span><span class="mi">2</span>
    <span class="n">bb</span> <span class="o">=</span><span class="n">aa</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">aa</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">bb</span><span class="p">))</span> <span class="c1"># 相同</span>
    <span class="n">bb</span> <span class="o">=</span><span class="mi">3</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">aa</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">bb</span><span class="p">))</span> <span class="c1"># 不同，因为把3 这个值重新复制给了变量bb</span>
</code></pre></td></tr></table>
</div>
</div><p>对于复杂的数据类型，使用deepcopy() 的时候，本来就是会重新拷贝一份到内存中。在python3 中copy() 和deepcopy() 这个是没有什么区别的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="n">list1</span> <span class="o">=</span><span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">]</span>
    <span class="n">list2</span> <span class="o">=</span><span class="n">list1</span> <span class="c1"># 这个是引用，所以和list1 是相同的</span>
    <span class="n">list3</span> <span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span>  <span class="c1"># 这个id 和list1 不同</span>
    <span class="n">list4</span> <span class="o">=</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">list1</span><span class="p">)</span><span class="c1"># 这个id 和list1 不同 </span>
    <span class="k">print</span><span class="p">(</span><span class="nb">id</span><span class="p">(</span><span class="n">list1</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">list2</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">list3</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">list4</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>在python 中如何返回值有多个，可以使用元组。虽然是可以使用全局变量，但是在真正的工作中是不推荐这样做的，因为在多线程环境下，这种方式并不是一种 线程安全的方法。</p>
<p>关于 传值还是传引用？</p>
<p>结论：python不允许程序员选择采用传值还是传引用。Python参数传递采用的肯定是“传对象引用”的方式。这种方式相当于传值和传引用的一种综合。如果函数收到的是一个可变对象（比如字典或者列表）的引用，就能修改对象的原始值－－相当于通过“传引用”来传递对象。如果函数收到的是一个不可变对象（比如数字、字符或者元组）的引用，就不能直接修改原始对象－－相当于通过“传值&rsquo;来传递对象。</p>
<p>细说： 对于不可变的对象，原始的对象因为不能改变，于是被“抛弃”，实际上是新new 了一个数值，所以操作的不是原来主函数中的值。</p>
<p>python 中的基本数据类型有六种：数字，字符串，列表，字典，元组和集合，(Number, String, List, Dict, Tuple, Set)</p>
<p>数字包括整形，长整型，浮点型和复数，(Int, Long, Float, Complex)
布尔值 True 和 False
集合包含集合和不可变集合 (set, frozenset)
字符串里包括 字符串，字节串和万国码 (str, bytes, unicode)
列表包括 列表和字节数组 (list, bytearray)
有的时候分四种，就是数字，序列，集合和字典。序列里包括字符串和列表和元组。
有的时候分五种，就是数字，字符串，列表，元组和字典。列表里包括元组。
其中不可变的类型有数字，字符串，布尔值，元组，和 frozenset， 可变类型有列表，字典，和集合。</p>
<p>可变和不可变的区分是该对象是否存在 add 或者 append 等方法来增加对象元素，使得对象在不改变自身 ID 的情况改变内容。</p>
<h3 id="object-oriented-design">object oriented design</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="k">class</span> <span class="nc">ParentClass</span><span class="p">:</span>
     <span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="k">print</span> <span class="s1">&#39;I am here&#39;</span>
    
    <span class="k">class</span> <span class="nc">SubClass1</span><span class="p">(</span><span class="n">ParentClass</span><span class="p">):</span> 
    <span class="k">class</span> <span class="nc">SubClass2</span><span class="p">(</span><span class="n">ParentClass</span><span class="p">):</span> 
</code></pre></td></tr></table>
</div>
</div><p>对于多继承的支持 （接口）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">):</span>  <span class="c1">#A implments B and C</span>
</code></pre></td></tr></table>
</div>
</div><p>如果想要call parent class function then you can dp:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="nb">super</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">funcion_name</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="garbage-collection">garbage collection</h3>
<p>all the objects  in python are stored in a heap (堆) space. Python has an built-in garbage collection mechanism. Memory management in Python involves a private heap containing all Python objects and data structures. The management of this private heap is ensured internally by the Python memory manager.</p>
<p>In computer science, a heap is a specialized tree-based data structure which is essentially an almost complete[1] tree that satisfies the heap property: if P is a parent node of C, then the key(the value) of P is either greater than or equal to (in a max heap) or less than or equal to (in a min heap) the key of C.</p>
<h3 id="trycatch">try&hellip;catch</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python">    <span class="c1"># raise exceptions</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="k">raise</span> <span class="n">TyeError</span>
    <span class="k">except</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s1">&#39;exception&#39;</span><span class="p">)</span>
    
    <span class="c1"># catching exceptions</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">do_something</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s1">&#39;exception&#39;</span><span class="p">)</span>
    <span class="c1"># try/ catch /finally</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">do_something</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
      <span class="k">print</span><span class="p">(</span><span class="s1">&#39;exception&#39;</span><span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
      <span class="n">close_connections</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="内置函数中的-all-和-any">内置函数中的 all() 和 any()</h3>
<p>这两个函数的参数都是iterable，也就是为list或者tuple.
all() 函数:  &ldquo;全‘真’为True，有‘假’为False&rdquo; ; 当iterable为空的时候，函数返回值为True
any() &ldquo;全‘假’为False，有‘真’为True&rdquo;. 当iterable为空的时候，函数返回值为False</p>
<p>给出all () 函数的一个简单的例子</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>  <span class="c1"># 列表list，元素都不为空或0</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">])</span>   <span class="c1"># 列表list，存在一个为空的元素</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="err">，</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>          <span class="c1"># 列表list，存在一个为0的元素</span>
<span class="bp">False</span>
   
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">((</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">))</span>  <span class="c1"># 元组tuple，元素都不为空或0</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">((</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">))</span>   <span class="c1"># 元组tuple，存在一个为空的元素</span>
<span class="bp">False</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>          <span class="c1"># 元组tuple，存在一个为0的元素</span>
<span class="bp">False</span>
   
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">([])</span>             <span class="c1"># 空列表</span>
<span class="bp">True</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">all</span><span class="p">(())</span>             <span class="c1"># 空元组</span>
<span class="bp">True</span>
</code></pre></td></tr></table>
</div>
</div><p>总结：
all()：&ldquo;有‘假’为False，全‘真’为True，iterable为空是True&rdquo;
any()：&ldquo;有‘真’为True，全‘假’为False，iterable为空是False&rdquo;</p>
<h3 id="sort-sorted-函数">sort() sorted() 函数</h3>
<p>在python3 中 sorted() 取消了对cmp 的支持, 所以只能使用 sort() 函数， 比如下面语句，表示先是按照第一个元素进行升序，然后在第一个元素相同的条件下，按照第二个元素进行降序。灰常nice的一种写法。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># type envelopes: List[List[int]]</span>
<span class="n">envelopes</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">-</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
</code></pre></td></tr></table>
</div>
</div><p>list.sort( ) 是in-place 操作， 在python2 中 sorted() 是一种有返回排序好的数组的操作。</p>
<h2 id="python-operators">python operators</h2>
<p>Python Arithmetic Operator</p>
<blockquote>
<p>Addition(+)  Subtraction(-)  Multiplication(*) Division(/) Exponentiation(**) Floor Division(//) 向下取整 Modulus(%)</p>
</blockquote>
<p>Python Relational Operator</p>
<blockquote>
<p>Less than(&lt;) Greater than(&gt;) Less than or equal to(&lt;=) Greater than or equal to(&gt;=) Equal to(= =) Not equal to(!=)</p>
</blockquote>
<p>Python Assignment Operator
（python 中没有 ++ 这个符号，这个是c++ 中的符号）</p>
<blockquote>
<p>Assign(=) Add and Assign(+=) Subtract and Assign(-=) Divide and Assign(/=) Divide and Assign(/=) Modulus and Assign(%=) Exponent and Assign(**=) Floor-Divide and Assign(//=)</p>
</blockquote>
<p>Python Logical Operator
(会有某种机制简化运算，比如 condition1 or condition2 ，如果condition1 是正确的，那么最后的结果就是正确的。)用于逻辑判断</p>
<blockquote>
<p>and  or not</p>
</blockquote>
<p>Python Membership Operator</p>
<blockquote>
<p>in  ,not in</p>
</blockquote>
<p>Python Identity Operator</p>
<blockquote>
<p>is, is not ,</p>
</blockquote>
<p>Python Bitwise Operator</p>
<p>(这其中的 | 表现的是一种二级制' 和&rsquo;的 关系，如果在二进制下，0 | 1 那么就是1 ) 属于集合操作。</p>
<blockquote>
<p>Binary AND(&amp;) Binary OR(|) Binary XOR(^) Binary XOR(^) Binary Left-Shift(&laquo;) Binary Right-Shift(&raquo;)</p>
</blockquote>
<h2 id="working-with-files">Working with files</h2>
<p>** Working with CSV, Json and XML**</p>
<p>Over the years, the list of possible formats that you can store your data in has grown significantly. But, there are 3 that dominate in their everyday usage: CSV, JSON, and XML. In this article, I’m going to share with you the easiest ways to work with these 3 popular data formats in Python!</p>
<p>有两种方式去读写 csv file：一种是 pd.read_csv() ，一种是built-in 的library 中的库函数
之前一直使用的pd.read_csv(), 现在才发现python 有built-in 的library。
We can do both read and write of a CSV using the built-in Python csv library. Usually, we’ll read the data into a list of lists.</p>
<p>python built-in function.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">csv</span> 
<span class="n">filename</span> <span class="o">=</span> <span class="s2">&#34;my_data.csv&#34;</span>
<span class="n">fields</span> <span class="o">=</span> <span class="p">[]</span> 
<span class="n">rows</span> <span class="o">=</span> <span class="p">[]</span> 

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span> 
    <span class="n">csvreader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span> 
    <span class="c1"># 如果单单是这个for，那么内存是消耗比较大的</span>
    <span class="c1"># fields = csvreader.next() </span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">csvreader</span><span class="p">:</span> 
        <span class="n">rows</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">[:</span><span class="mi">5</span><span class="p">]:</span> 
    <span class="k">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

<span class="c1"># Writing to csv file </span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">csvfile</span><span class="p">:</span> 
    <span class="n">csvwriter</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">csvfile</span><span class="p">)</span> 
    <span class="n">csvwriter</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">fields</span><span class="p">)</span> 
    <span class="n">csvwriter</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">dicttoxml</span> <span class="kn">import</span> <span class="n">dicttoxml</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="c1"># Building our dataframe</span>
<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Emily&#39;</span><span class="p">,</span> <span class="s1">&#39;Katie&#39;</span><span class="p">,</span> <span class="s1">&#39;John&#39;</span><span class="p">,</span> <span class="s1">&#39;Mike&#39;</span><span class="p">],</span>
        <span class="s1">&#39;Goals&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
        <span class="s1">&#39;Assists&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">18</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">14</span><span class="p">],</span>
        <span class="s1">&#39;Shots&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">112</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="mi">101</span><span class="p">,</span> <span class="mi">82</span><span class="p">]</span>
        <span class="p">}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">data</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="c1"># Converting the dataframe to a dictionary</span>
<span class="c1"># Then save it to file</span>
<span class="n">data_dict</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s2">&#34;records&#34;</span><span class="p">)</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;output.json&#39;</span><span class="p">,</span> <span class="s2">&#34;w+&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Converting the dataframe to XML</span>
<span class="c1"># Then save it to file</span>
<span class="n">xml_data</span> <span class="o">=</span> <span class="n">dicttoxml</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span><span class="o">.</span><span class="n">decode</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&#34;output.xml&#34;</span><span class="p">,</span> <span class="s2">&#34;w+&#34;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">xml_data</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>

<span class="c1"># Read the data from file</span>
<span class="c1"># We now have a Python dictionary</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;data.json&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">data_listofdict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    
<span class="c1"># We can do the same thing with pandas</span>
<span class="n">data_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s1">&#39;data.json&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>

<span class="c1"># We can write a dictionary to JSON like so</span>
<span class="c1"># Use &#39;indent&#39; and &#39;sort_keys&#39; to make the JSON</span>
<span class="c1"># file look nice</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;new_data.json&#39;</span><span class="p">,</span> <span class="s1">&#39;w+&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data_listofdict</span><span class="p">,</span> <span class="n">json_file</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">sort_keys</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># And again the same thing with pandas</span>
<span class="n">export</span> <span class="o">=</span> <span class="n">data_df</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="s1">&#39;new_data.json&#39;</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>处理windows 和linux 中文件分割符不兼容的情况</p>
<blockquote>
<p>python 中 open( mode =&lsquo;rt&rsquo;) 的选项：
w,r,wt,rt都是python里面文件操作的模式。
w是写模式，r是读模式。
t是windows平台特有的所谓text mode(文本模式）,区别在于会自动识别windows平台的换行符。
类Unix平台的换行符是\n，而windows平台用的是\r\n两个ASCII字符来表示换行，python内部采用的是\n来表示换行符。
rt模式下，python在读取文本时会自动把\r\n转换成\n.
wt模式下，Python写文件时会用\r\n来表示换行。</p>
</blockquote>
<p>参考资料：
<a href="https://towardsdatascience.com/the-easy-way-to-work-with-csv-json-and-xml-in-python-5056f9325ca9">https://towardsdatascience.com/the-easy-way-to-work-with-csv-json-and-xml-in-python-5056f9325ca9</a></p>
<h2 id="输入和输出函数">输入和输出函数</h2>
<h3 id="输入函数">输入函数</h3>
<p>python2 有 raw_input() 和 input() 函数，前者把所有的接收值当做string，如果想要用int，那么需要自己进行转换。input() 如果得到int，那么就是int，string 类型就是string 类型。
python3 中只有input() 函数，所有的接收都是 string，需要自己进行转换。</p>
<p>python3 中的input() 函数就是python2 中的raw_input() 函数。下面的代码使用 python3 实现。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&#34;__main__&#34;</span><span class="p">:</span>

    <span class="c1"># 输入输出 n*n 的arrar</span>
    <span class="s2">&#34;&#34;&#34;
</span><span class="s2">
</span><span class="s2">    n =int(input())
</span><span class="s2">
</span><span class="s2">    arr =[[0]*n] *n
</span><span class="s2">
</span><span class="s2">    # 在python3 中需要 exactly 的注意这种分割，输入的时候要及其的小心
</span><span class="s2">    for i in range(n):
</span><span class="s2">        arr[i] = input().split(&#34; &#34;)
</span><span class="s2">        arr[i] =[int(a) for a in arr[i]] # 转成 int 类型
</span><span class="s2">
</span><span class="s2">    print(arr)
</span><span class="s2">    
</span><span class="s2">    &#34;&#34;&#34;</span>
    <span class="c1"># 输入和输出 n*m 的数组</span>
    <span class="n">n</span> <span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    <span class="n">m</span> <span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>

    <span class="n">arr</span> <span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">]</span><span class="o">*</span><span class="n">m</span><span class="p">]</span><span class="o">*</span><span class="n">n</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">)</span>
        <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="k">for</span> <span class="n">a</span> <span class="ow">in</span> <span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>

    <span class="k">print</span><span class="p">(</span><span class="n">arr</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><p>处理输入和输出问题，就是使用 <code>python3</code> 处理，然后注释使用 <code>list(map(str, []))</code> 和 <code>list(map(int, []))</code> 这种处理手段。涨涨记性吧</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#python 中传递的是值 还是引用</span>
<span class="k">def</span> <span class="nf">quick_sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">r</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">l</span><span class="o">&gt;=</span> <span class="n">r</span><span class="p">:</span> <span class="k">return</span> 
    <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span><span class="n">l</span><span class="p">,</span> <span class="n">r</span>
    
    <span class="n">key</span> <span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">]</span>
    <span class="k">while</span><span class="p">(</span><span class="n">l</span><span class="o">&lt;</span><span class="n">r</span><span class="p">):</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l</span> <span class="o">&lt;</span><span class="n">r</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">key</span><span class="p">):</span> <span class="n">r</span> <span class="o">-=</span><span class="mi">1</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">r</span><span class="p">]</span>
        <span class="k">while</span><span class="p">(</span><span class="n">l</span> <span class="o">&lt;</span><span class="n">r</span> <span class="ow">and</span> <span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">key</span><span class="p">):</span> <span class="n">l</span> <span class="o">+=</span><span class="mi">1</span>
        <span class="n">nums</span><span class="p">[</span><span class="n">r</span><span class="p">]</span> <span class="o">=</span><span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">]</span>
    <span class="n">nums</span><span class="p">[</span><span class="n">l</span><span class="p">]</span> <span class="o">=</span><span class="n">key</span>
    
    <span class="n">quick_sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">l</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">quick_sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="n">l</span> <span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span><span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
    <span class="n">n</span> <span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">())</span>
    <span class="n">nums</span> <span class="o">=</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="nb">input</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()))</span>
    <span class="n">quick_sort</span><span class="p">(</span><span class="n">nums</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">nums</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
    <span class="c1">#print(nums)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">nums</span><span class="p">))))</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="string-formatting-syntax">String Formatting Syntax</h3>
<blockquote>
<p>As of Python 3.6, f-strings are a great new way to format strings. Not only are they more readable, more concise, and less prone to error than other ways of formatting, but they are also faster!</p>
</blockquote>
<p>Option #1: %-formatting</p>
<blockquote>
<p>This is the OG of Python formatting and has been in the language since the very beginning. You can read more in the Python docs. Keep in mind that %-formatting is not recommended by the docs.</p>
</blockquote>
<p>How to Use %-formatting</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Eric&#34;</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">74</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&#34;Hello, </span><span class="si">%s</span><span class="s2">. You are </span><span class="si">%s</span><span class="s2">.&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>Why %-formatting Isn’t Great</p>
<p>However, once you start using several parameters and longer strings, your code will quickly become much less easily readable. Things are starting to look a little messy already:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">first_name</span> <span class="o">=</span> <span class="s2">&#34;Eric&#34;</span>
<span class="n">last_name</span> <span class="o">=</span> <span class="s2">&#34;Idle&#34;</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">74</span>
<span class="n">profession</span> <span class="o">=</span> <span class="s2">&#34;comedian&#34;</span>
<span class="n">affiliation</span> <span class="o">=</span> <span class="s2">&#34;Monty Python&#34;</span>
<span class="s2">&#34;Hello, </span><span class="si">%s</span><span class="s2"> </span><span class="si">%s</span><span class="s2">. You are </span><span class="si">%s</span><span class="s2">. You are a </span><span class="si">%s</span><span class="s2">. You were a member of </span><span class="si">%s</span><span class="s2">.&#34;</span> <span class="o">%</span> <span class="p">(</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">age</span><span class="p">,</span> <span class="n">profession</span><span class="p">,</span> <span class="n">affiliation</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><p>Option #2: str.format()</p>
<p>This newer way of getting the job done was introduced in Python 2.6.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s2">&#34;Hello, {}. You are {}.&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">)</span> <span class="c1"># 默认的顺序</span>
<span class="s2">&#34;Hello, {1}. You are {0}.&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">age</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="c1"># 按照index 的顺序</span>

<span class="c1"># 传入的 dict 的顺序</span>
 <span class="n">person</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Eric&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">74</span><span class="p">}</span>
 <span class="s2">&#34;Hello, {name}. You are {age}.&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">person</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">],</span> <span class="n">age</span><span class="o">=</span><span class="n">person</span><span class="p">[</span><span class="s1">&#39;age&#39;</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><p>Why str.format() Isn’t Great</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">((</span><span class="s2">&#34;Hello, {first_name} {last_name}. You are {age}. &#34;</span> <span class="o">+</span><span class="s2">&#34;You are a {profession}. You were a member of {affiliation}.&#34;</span><span class="p">)</span> <span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">first_name</span><span class="o">=</span><span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="o">=</span><span class="n">last_name</span><span class="p">,</span> <span class="n">age</span><span class="o">=</span><span class="n">age</span><span class="p">,</span><span class="n">profession</span><span class="o">=</span><span class="n">profession</span><span class="p">,</span> <span class="n">affiliation</span><span class="o">=</span><span class="n">affiliation</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>f-Strings: A New and Improved Way to Format Strings in Python</p>
<p>The syntax is similar to the one you used with str.format() but less verbose.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Eric&#34;</span>
<span class="n">age</span> <span class="o">=</span> <span class="mi">74</span>
<span class="n">f</span><span class="s2">&#34;Hello, {name}. You are {age}.&#34;</span>
<span class="n">F</span><span class="s2">&#34;Hello, {name}. You are {age}.&#34;</span> <span class="c1">#  也可以使用大写的字母F</span>
</code></pre></td></tr></table>
</div>
</div><p>Arbitrary Expressions</p>
<p>Because f-strings are evaluated at runtime, you can put any and all valid Python expressions in them. This allows you to do some nifty things.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">f</span><span class="s2">&#34;{2 * 37}&#34;</span>

<span class="k">def</span> <span class="nf">to_lowercase</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
	<span class="k">return</span> <span class="nb">input</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&#34;Eric Idle&#34;</span>
<span class="n">f</span><span class="s2">&#34;{to_lowercase(name)} is funny.&#34;</span>
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Comedian</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first_name</span><span class="p">,</span> <span class="n">last_name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">first_name</span> <span class="o">=</span> <span class="n">first_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_name</span> <span class="o">=</span> <span class="n">last_name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&#34;{self.first_name} {self.last_name} is {self.age}.&#34;</span>

    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">f</span><span class="s2">&#34;{self.first_name} {self.last_name} is {self.age}. Surprise!</span>
</code></pre></td></tr></table>
</div>
</div><p>The <code>__str__()</code> and <code>__repr__()</code> methods deal with how objects are presented as strings, so you’ll need to make sure you include at least one of those methods in your class definition. If you have to pick one, go with <code>__repr__()</code> because it can be used in place of <code>__str__()</code>.</p>
<p>By default, f-strings will use <code>__str__()</code>, but you can make sure they use <code>__repr__()</code> if you include the conversion flag !r:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">f&#34;{new_comedian}&#34;
f&#34;{new_comedian!r}&#34;
</code></pre></td></tr></table>
</div>
</div><p>{% fold 开/合 %}
Python: <strong>str</strong>( ) vs. <strong>repr</strong>( )</p>
<p>According to the official documentation,  <code> __repr__()</code> is used to compute an official string representation of an object which, and, if possible, can be used to recreate the object itself, however, <code>__str__()</code> is used to compute an informal string representation of that object.</p>
<p>Although the <strong>repr</strong>() official representation is for developers so they can use it to debug, the <strong>str</strong>() informal representation is for the final users.</p>
<p>代码说明：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
    <span class="n">nb</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">print</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">nb</span><span class="p">))</span>
    <span class="c1">#1</span>
    <span class="k">print</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">nb</span><span class="p">))</span>
    <span class="c1">#1</span>
    <span class="k">print</span> <span class="s1">&#39;*&#39;</span> <span class="o">*</span> <span class="mi">20</span>
<span class="c1">#********************</span>
    <span class="n">chaine</span> <span class="o">=</span> <span class="s2">&#34;hello world&#34;</span>
    <span class="k">print</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">chaine</span><span class="p">))</span>
    <span class="c1">#hello world</span>
    <span class="k">print</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">chaine</span><span class="p">))</span>
    <span class="c1">#&#39;hello world&#39;</span>
    <span class="k">print</span> <span class="s1">&#39;*&#39;</span> <span class="o">*</span> <span class="mi">20</span>
<span class="c1">#********************</span>
    <span class="n">d_cur</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
    <span class="k">print</span> <span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">d_cur</span><span class="p">))</span>
    <span class="c1">#2019-03-14 12:01:44.377000</span>
    <span class="k">print</span> <span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">d_cur</span><span class="p">))</span>
    <span class="c1">#datetime.datetime(2019, 3, 14, 12, 1, 44, 377000)</span>
    <span class="k">print</span> <span class="s1">&#39;*&#39;</span> <span class="o">*</span> <span class="mi">20</span>
    <span class="c1">#********************</span>
</code></pre></td></tr></table>
</div>
</div><p>参考文献：<a href="https://dzone.com/articles/python-str-vs-repr">Python: <strong>str</strong>( ) vs. <strong>repr</strong>( )</a></p>
<p>{% endfold %}</p>
<p>Speed</p>
<p>As you already saw, f-strings are expressions evaluated at runtime rather than constant values. Here’s an excerpt from the docs:</p>
<blockquote>
<p>“F-strings provide a way to embed expressions inside string literals, using a minimal syntax. It should be noted that an f-string is really an expression evaluated at run time, not a constant value. In Python source code, an f-string is a literal string, prefixed with f, which contains expressions inside braces. The expressions are replaced with their values.” (Source)</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">import timeit
timeit.timeit(&#34;&#34;&#34;name = &#34;Eric&#34; age = 74 &#39;%s is %s.&#39; % (name, age)&#34;&#34;&#34;, number = 10000)
# 0.003324444866599663
timeit.timeit(&#34;&#34;&#34;name = &#34;Eric&#34;age = 74&#39;{} is {}.&#39;.format(name, age)&#34;&#34;&#34;, number = 10000)
# 0.004242089427570761
timeit.timeit(&#34;&#34;&#34;name = &#34;Eric&#34;age = 74f&#39;{name} is {age}.&#39;&#34;&#34;&#34;, number = 10000)
# 0.0024820892040722242
</code></pre></td></tr></table>
</div>
</div><p>Quotation Marks</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">f</span><span class="s1">&#39;&#39;&#39;Eric Idle&#39;&#39;&#39;</span>
<span class="n">f</span><span class="s2">&#34;&#34;&#34;Eric Idle&#34;&#34;&#34;</span> <span class="c1"># 注意是三对</span>
<span class="c1"># &#39;Eric Idle&#39;</span>
<span class="n">f</span><span class="s2">&#34;The </span><span class="se">\&#34;</span><span class="s2">comedian</span><span class="se">\&#34;</span><span class="s2"> is {name}, aged {age}.&#34;</span>
<span class="c1"># &#39;The &#34;comedian&#34; is Eric Idle, aged 74.&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>Dictionaries</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">comedian</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Eric Idle&#39;</span><span class="p">,</span> <span class="s1">&#39;age&#39;</span><span class="p">:</span> <span class="mi">74</span><span class="p">}</span>
<span class="n">f</span><span class="s2">&#34;The comedian is {comedian[&#39;name&#39;]}, aged {comedian[&#39;age&#39;]}.&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>Braces</p>
<p>In order to make a brace appear in your string, you must use double braces:</p>
<p>Note that using triple braces will result in there being only single braces in your string:</p>
<p>However, you can get more braces to show if you use more than triple braces:</p>
<p><a href="https://realpython.com/python-f-strings/">Python 3&rsquo;s f-Strings: An Improved String Formatting Syntax (Guide)</a></p>
<h2 id="面向对象-for-python">面向对象 (for python)</h2>
<p>访问控制有三种级别：私有、受保护、公有。私有。（Private）：只有类自身可以访问 受保护。（Protected）：只有类自身和子类可以访问 公有。（Public）：任何类都可以访问。</p>
<p><strong>公有（Public）</strong></p>
<p>在Python的类中，默认情况下定义的属性都是公有的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="n">bar</span> <span class="o">=</span> <span class="mi">123</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bob</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">bob</span> <span class="o">=</span> <span class="n">bob</span>

<span class="k">print</span><span class="p">(</span><span class="n">Foo</span><span class="o">.</span><span class="n">bar</span><span class="p">)</span>  <span class="c1"># 123</span>

<span class="n">foo</span> <span class="o">=</span> <span class="n">Foo</span><span class="p">(</span><span class="mi">456</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">bob</span><span class="p">)</span>  <span class="c1"># 456</span>

</code></pre></td></tr></table>
</div>
</div><p>上面类Foo中的bar属性就是类属性，__init__方法中定义的bob是实例属性，bar和bob都是公有的属性，外部可以访问，分别print类中的bar和实例中的bob，输出了对应的值。</p>
<p><strong>受保护（Protected）</strong></p>
<p>在Python中定义一个受保护的属性，只需要在其名字前加一个下划线_，我们将Foo方法中的bob和bar改为_bob和_bar，他们就变成了受保护的属性了，代码如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="n">_bar</span> <span class="o">=</span> <span class="mi">123</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bob</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">_bob</span> <span class="o">=</span> <span class="n">bob</span>


<span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
	
	<span class="k">def</span> <span class="nf">print_bob</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_bob</span><span class="p">)</span>

	<span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">print_bar</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_bar</span><span class="p">)</span>


<span class="n">Son</span><span class="o">.</span><span class="n">print_bar</span><span class="p">()</span>  <span class="c1"># 123</span>

<span class="n">son</span> <span class="o">=</span> <span class="n">Son</span><span class="p">(</span><span class="mi">456</span><span class="p">)</span>
<span class="n">son</span><span class="o">.</span><span class="n">print_bob</span><span class="p">()</span>  <span class="c1"># 456</span>
</code></pre></td></tr></table>
</div>
</div><p>定义一个类Son继承自Foo，由于受保护的对象只能在类的内部和子类中被访问，不能直接调用print(Son._bar)或print(son._bob)来输出这两个属性的值，所以定义了print_bar和print_bob方法，实现在子类中输出，这段代码也正常的输出了_bar和_bob的值。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">print</span><span class="p">(</span><span class="n">Son</span><span class="o">.</span><span class="n">_bar</span><span class="p">)</span>  <span class="c1"># 123</span>

<span class="n">son</span> <span class="o">=</span> <span class="n">Son</span><span class="p">(</span><span class="mi">456</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">_bob</span><span class="p">)</span>  <span class="c1"># 456</span>
</code></pre></td></tr></table>
</div>
</div><p>（假装）惊讶的发现，竟然没有报错，也输出了正确的值。</p>
<p>Python中用加下划线来定义受保护变量，是一种约定的规范，而不是语言层面真的实现了访问控制，所以，我们定义的保护变量，依然可以在外部被访问到（这是个feature，不是bug）。</p>
<p><code>私有（private）</code></p>
<p>Python定义私有属性，需要在属性名前加两个下划线__，把上面的代码修改一下，运行一下会发现下面的代码中的任何一个print都会报错的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="n">__bar</span> <span class="o">=</span> <span class="mi">123</span>

	<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bob</span><span class="p">):</span>
		<span class="bp">self</span><span class="o">.</span><span class="n">__bob</span> <span class="o">=</span> <span class="n">bob</span>


<span class="k">class</span> <span class="nc">Son</span><span class="p">(</span><span class="n">Foo</span><span class="p">):</span>
	
	<span class="k">def</span> <span class="nf">print_bob</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__bob</span><span class="p">)</span>  <span class="c1"># Error</span>

	<span class="nd">@classmethod</span>
	<span class="k">def</span> <span class="nf">print_bar</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
		<span class="k">print</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">__bar</span><span class="p">)</span>  <span class="c1"># Error</span>


<span class="k">print</span><span class="p">(</span><span class="n">Son</span><span class="o">.</span><span class="n">__bar</span><span class="p">)</span>  <span class="c1"># Error</span>

<span class="n">son</span> <span class="o">=</span> <span class="n">Son</span><span class="p">(</span><span class="mi">456</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">son</span><span class="o">.</span><span class="n">_bob</span><span class="p">)</span>  <span class="c1"># Error</span>

</code></pre></td></tr></table>
</div>
</div><p>深入一下——私有属性真的就访问不到了吗？</p>
<p>要了解私有属性是否真的访问不到，需要从Python是如何实现私有属性入手。CPython中，会把双下划线的属性变为_ClassName__PropertyName的形式，用代码演示一下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="n">__bar</span> <span class="o">=</span> <span class="mi">123</span>

<span class="k">print</span><span class="p">(</span><span class="n">Foo</span><span class="o">.</span><span class="n">_Foo__bar</span><span class="p">)</span>  <span class="c1"># 123</span>
</code></pre></td></tr></table>
</div>
</div><p>再比如</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">F</span><span class="p">:</span>
    <span class="n">__name</span> <span class="o">=</span> <span class="s2">&#34;xurui&#34;</span>
<span class="n">f</span> <span class="o">=</span> <span class="n">F</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">_F__name</span>          <span class="c1">##通过这个方式可以从外部访问...</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span> 
</code></pre></td></tr></table>
</div>
</div><p>运行一下可以知道，正常输出了__bar的值，但是不推荐这样去访问私有属性，因为不同的Python解释器对于私有属性的处理不一样。</p>
<p>特例</p>
<p>使用双下划线定义私有属性，有一种特殊情况，当属性后也有两个下划线的时候，这个属性会被Python解释器当做魔术方法，从而不做私有处理。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="n">__bar__</span> <span class="o">=</span> <span class="mi">123</span>


<span class="k">print</span><span class="p">(</span><span class="n">Foo</span><span class="o">.</span><span class="n">__bar__</span><span class="p">)</span>  <span class="c1"># 123</span>
</code></pre></td></tr></table>
</div>
</div><p>上面代码输出了123，证明Python解释器并没有把__bar__当做私有属性。当定义私有属性时，需要注意名字最后最多只能有一个下划线。</p>
<p>假如定义的属性名就叫__呢？不妨直接试一下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
	<span class="n">__</span> <span class="o">=</span> <span class="mi">123</span>
<span class="k">print</span><span class="p">(</span><span class="n">Foo</span><span class="o">.</span><span class="n">__</span><span class="p">)</span>  <span class="c1"># 123</span>
</code></pre></td></tr></table>
</div>
</div><p>可以发现名字叫__的属性也不会被认为是私有属性，名字是多个下划线的属性也不是私有属性（比如_______）。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">ProtectMe</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">me</span> <span class="o">=</span> <span class="s2">&#34;wxx&#34;</span>
       <span class="bp">self</span><span class="o">.</span><span class="n">__name</span> <span class="o">=</span> <span class="s2">&#34;zixin&#34;</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">ProtectMe</span><span class="p">()</span>
<span class="k">print</span> <span class="n">p</span><span class="o">.</span><span class="n">name</span>
</code></pre></td></tr></table>
</div>
</div><p><a href="https://juejin.im/post/5ac18d08f265da237b223d1a">与面试官谈笑风生 | Python面向对象之访问控制</a></p>
<p>**类class的访问控制 **（这个实际上体现的是封装的思想）</p>
<p>Python中没有访问控制的关键字，例如private、protected等等。但是，在Python编码中，有一些约定来进行访问控制。Python中没有真正的私有属性或方法,可以在你想声明为私有的方法和属性前加上单下划线,以提示该属性和方法不应在外部调用.如果真的调用了也不会出错,但不符合规范.</p>
<ol start="0">
<li>
<p>xx： 共有变量</p>
</li>
<li>
<p>单下划线 &ldquo;_&rdquo;</p>
</li>
</ol>
<p>前置单下划线，私有化属性或方法，一般来讲，变量名_xx被看作是“私有 的”，在模块或类外不可以使用。当变量是私有的时候，用_xx 来表示变量是很好的习惯。类对象和子类可以访问,这并不能完全做到真正的私有，只是约定俗成的而已，这样写表示不希望这个变量在外部被直接调用。</p>
<ol start="2">
<li>双下划线&quot;__&quot;</li>
</ol>
<p>前置双下划线，私有化属性或方法，无法在外部直接访问（名字重整所以访问不到,只能是允许这个类本身进行访问了。连子类也不可以）</p>
<ol start="3">
<li>xx_：后置单下划线，用于避免与Python关键词的冲突（这种约定俗称的东西很好，一定要按照这种规范去做）</li>
</ol>
<p>单下划线、双下划线、头尾双下划线说明：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">__foo__: 定义的是特殊方法，一般是系统定义名字 ，类似 __init__() 之类的。

_foo: 以单下划线开头的表示的是 protected 类型的变量，即保护类型只能允许其本身与子类进行访问，不能用于 from module import *

__foo: 双下划线的表示的是私有类型(private)的变量, 只能是允许这个类本身进行访问了。

</code></pre></td></tr></table>
</div>
</div><p>这种命名方式同样是适用方法的命名。</p>
<p>python 中也是一样的，重载是类本身就有的方法，重写是子类针对父类函数的重写。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Site</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">url</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>       <span class="c1"># public</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__url</span> <span class="o">=</span> <span class="n">url</span>   <span class="c1"># private</span>
        <span class="c1"># 这个是系统的方法</span>
 
    <span class="k">def</span> <span class="nf">who</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;name  : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;url : &#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__url</span><span class="p">)</span>
 
    <span class="k">def</span> <span class="nf">__foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>          <span class="c1"># 私有方法</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;这是私有方法&#39;</span><span class="p">)</span>
 
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>            <span class="c1"># 公共方法</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;这是公共方法&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__foo</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p><strong>继承</strong></p>
<p>Python3的继承机制不同于Python2。其核心原则是下面两条，请谨记！</p>
<ul>
<li>子类在调用某个方法或变量的时候，首先在自己内部查找，如果没有找到，则开始根据继承机制在父类里查找。</li>
<li>根据父类定义中的顺序，以深度优先的方式逐一查找父类！</li>
</ul>
<p>继承参数的书写有先后顺序，写在前面的被优先继承。</p>
<p>super() 函数</p>
<p>我们都知道，在子类中如果有与父类同名的成员，那就会覆盖掉父类里的成员。那如果你想强制调用父类的成员呢？使用super()函数！这是一个非常重要的函数，最常见的就是通过super调用父类的实例化方法__init__！</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">A</span><span class="p">:</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;父类的__init__方法被执行了！&#34;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;父类的show方法被执行了！&#34;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">B</span><span class="p">(</span><span class="n">A</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">obj</span> <span class="o">=</span> <span class="n">B</span><span class="p">(</span><span class="s2">&#34;jack&#34;</span><span class="p">,</span> <span class="mi">18</span><span class="p">)</span>
<span class="n">obj</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>继承可以把父类的所有功能都直接拿过来，这样就不必重零做起，子类只需要新增自己特有的方法，也可以把父类不适合的方法覆盖重写。</p>
<p><strong>多态</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Animal</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">kind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;i am animal&#34;</span><span class="p">)</span>
        
<span class="k">class</span> <span class="nc">Dog</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">kind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;i am a dog&#34;</span><span class="p">)</span>
        
<span class="k">class</span> <span class="nc">Cat</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">kind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;i am a cat&#34;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Pig</span><span class="p">(</span><span class="n">Animal</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">kind</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&#34;i am a pig&#34;</span><span class="p">)</span>

<span class="c1"># 这个函数接收一个animal参数，并调用它的kind方法</span>
<span class="k">def</span> <span class="nf">show_kind</span><span class="p">(</span><span class="n">animal</span><span class="p">):</span>
    <span class="n">animal</span><span class="o">.</span><span class="n">kind</span><span class="p">()</span>

<span class="n">d</span> <span class="o">=</span> <span class="n">Dog</span><span class="p">()</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">Cat</span><span class="p">()</span>
<span class="n">p</span> <span class="o">=</span> <span class="n">Pig</span><span class="p">()</span>

<span class="n">show_kind</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="n">show_kind</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="n">show_kind</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="o">------------------</span>
<span class="err">打印结果：</span>

<span class="n">i</span> <span class="n">am</span> <span class="n">a</span> <span class="n">dog</span>
<span class="n">i</span> <span class="n">am</span> <span class="n">a</span> <span class="n">cat</span>
<span class="n">i</span> <span class="n">am</span> <span class="n">a</span> <span class="n">pig</span>
</code></pre></td></tr></table>
</div>
</div><p>多态的思想，使用一个指针（变量）可以根据位置指向不同的子类。</p>
<h3 id="python-中的三类方法">python 中的三类方法</h3>
<p>一般使用实例方法最多，需要有 self 作为一个传入参数，在子类中可以使用该方法。 类方法使用修饰器 @classmethod ；静态方法使用修饰器 @staticmethod，对于静态方法，调用时并不需要传递类或者实例。其实，静态方法很像我们在类外定义的函数，只不过静态方法可以通过类或者实例来调用而已。</p>
<p>实例方法只能被实例对象调用，静态方法(由@staticmethod装饰的方法)、类方法(由@classmethod装饰的方法)，可以被类或类的实例对象调用。</p>
<p>实例方法，第一个参数必须要默认传实例对象，一般习惯用self。
静态方法，参数没有要求。
类方法，第一个参数必须要默认传类，一般习惯用cls。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Kls</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;executing foo(</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">))</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">class_foo</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;executing class_foo(</span><span class="si">%s</span><span class="s1">,</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">cls</span><span class="p">,</span><span class="n">x</span><span class="p">))</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">static_foo</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;executing static_foo(</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="n">x</span><span class="p">)</span>

<span class="n">ik</span> <span class="o">=</span> <span class="n">Kls</span><span class="p">()</span>
<span class="c1"># 实例方法</span>
<span class="n">ik</span><span class="o">.</span><span class="n">foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ik</span><span class="o">.</span><span class="n">foo</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;==========================================&#39;</span><span class="p">)</span>
<span class="c1"># 类方法</span>
<span class="n">ik</span><span class="o">.</span><span class="n">class_foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Kls</span><span class="o">.</span><span class="n">class_foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ik</span><span class="o">.</span><span class="n">class_foo</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s1">&#39;==========================================&#39;</span><span class="p">)</span>
<span class="c1"># 静态方法</span>
<span class="n">ik</span><span class="o">.</span><span class="n">static_foo</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">Kls</span><span class="o">.</span><span class="n">static_foo</span><span class="p">(</span><span class="s1">&#39;hi&#39;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">ik</span><span class="o">.</span><span class="n">static_foo</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>类方法
Python 提供了 classmethod 装饰器让我们实现上述功能，看下面的例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">A</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">class_foo</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">print</span> <span class="s1">&#39;Hello, &#39;</span><span class="p">,</span> <span class="bp">cls</span>
        <span class="k">print</span> <span class="bp">cls</span><span class="o">.</span><span class="n">bar</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">A</span><span class="o">.</span><span class="n">class_foo</span><span class="p">()</span>   <span class="c1"># 直接通过类来调用方法</span>
<span class="n">Hello</span><span class="p">,</span>  <span class="o">&lt;</span><span class="k">class</span> <span class="err">&#39;</span><span class="nc">__main__</span><span class="o">.</span><span class="n">A</span><span class="s1">&#39;&gt;</span>
<span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p>在上面，我们使用了 classmethod 装饰方法 class_foo，它就变成了一个类方法，class_foo 的参数是 cls，代表类本身，当我们使用 A.class_foo() 时，cls 就会接收 A 作为参数。另外，被 classmethod 装饰的方法由于持有 cls 参数，因此我们可以在方法里面调用类的属性、方法，比如 cls.bar。</p>
<p>静态方法</p>
<p>在类中往往有一些方法跟类有关系，但是又不会改变类和实例状态的方法，这种方法是静态方法，我们使用 staticmethod 来装饰，比如下面的例子：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">class A(object):
    bar = 1
    @staticmethod
    def static_foo():
        print &#39;Hello, &#39;, A.bar

&gt;&gt;&gt; a = A()
&gt;&gt;&gt; a.static_foo()
Hello, 1
&gt;&gt;&gt; A.static_foo()
Hello, 1
</code></pre></td></tr></table>
</div>
</div><p>可以看到，静态方法没有 self 和 cls 参数，可以把它看成是一个普通的函数，我们当然可以把它写到类外面，但这是不推荐的，因为这不利于代码的组织和命名空间的整洁。</p>
<h3 id="python-中的单例-多例模式">python 中的单例/ 多例模式</h3>
<ol>
<li>定义</li>
</ol>
<p>单例模式(Singleton Pattern)：单例模式确保某一个类只有一个实例，而且自行实例化并向整个系统提供这个实例，这个类称为单例类，它提供全局访问的方法。单例模式的要点有三个：一是某个类只能有一个实例；二是它必须自行创建这个实例；三是它必须自行向整个系统提供这个实例。单例模式是一种对象创建型模式。单例模式又名单件模式或单态模式。</p>
<ol start="2">
<li>单例模式的分类</li>
</ol>
<p>懒汉版（Lazy Singleton）：单例实例在第一次被使用时才进行初始化，这叫做延迟初始化。</p>
<p>Lazy Singleton存在内存泄露的问题，有两种解决方法：</p>
<ul>
<li>使用智能指针</li>
<li>使用静态的嵌套类对象</li>
</ul>
<p>饿汉版（Eager Singleton）：指单例实例在程序运行时被立即执行初始化。由于在main函数之前初始化，所以没有线程安全的问题。</p>
<p>两种分类的总结：
Eager Singleton 虽然是线程安全的，但存在潜在问题；
Lazy Singleton通常需要加锁来保证线程安全，但局部静态变量版本在C++11后是线程安全的；
局部静态变量版本（Meyers Singleton）最优雅。</p>
<ol start="3">
<li>什么情况下使用单例模式</li>
</ol>
<ul>
<li>系统只需要一个实例对象，如系统要求提供一个唯一的序列号生成器，或者需要考虑资源消耗太大而只允许创建一个对象。</li>
<li>客户调用类的单个实例只允许使用一个公共访问点，除了该公共访问点，不能通过其他途径访问该实例。</li>
</ul>
<p>小的例子：
某个服务器程序的配置信息存放在一个文件中，客户端通过一个 AppConfig 的类来读取配置文件的信息。如果在程序运行期间，有很多地方都需要使用配置文件的内容，也就是说，很多地方都需要创建 AppConfig 对象的实例，这就导致系统中存在多个 AppConfig 的实例对象，而这样会严重浪费内存资源，尤其是在配置文件内容很多的情况下。事实上，类似 AppConfig 这样的类，我们希望在程序运行期间只存在一个实例对象。</p>
<ol start="4">
<li>python 中的实现</li>
</ol>
<p>有以下四种方式实现：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">使用模块
使用 __new__
使用装饰器（decorator）
使用元类（metaclass）
</code></pre></td></tr></table>
</div>
</div><p>使用模块</p>
<blockquote>
<p>其实，Python 的模块就是天然的单例模式，因为模块在第一次导入时，会生成 .pyc 文件，当第二次导入时，就会直接加载 .pyc 文件，而不会再次执行模块代码。因此，我们只需把相关的函数和数据定义在一个模块中，就可以获得一个单例对象了。如果我们真的想要一个单例类，可以考虑这样做：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># mysingleton.py</span>
<span class="k">class</span> <span class="nc">My_Singleton</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">foo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
<span class="n">my_singleton</span> <span class="o">=</span> <span class="n">My_Singleton</span><span class="p">()</span>
</code></pre></td></tr></table>
</div>
</div><p>使用new 关键字, 如果已经有有了该实例，那么就不用生成了</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">class</span> <span class="nc">Singleton</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">_instance</span> <span class="o">=</span> <span class="bp">None</span>
    <span class="k">def</span> <span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span><span class="p">:</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">Singleton</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>  
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_instance</span>  
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="n">Singleton</span><span class="p">):</span>  
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p>使用修饰器</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">wraps</span>
<span class="k">def</span> <span class="nf">singleton</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
    <span class="n">instances</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="nd">@wraps</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">getinstance</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">cls</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">instances</span><span class="p">:</span>
            <span class="n">instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">instances</span><span class="p">[</span><span class="bp">cls</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">getinstance</span>
<span class="nd">@singleton</span>
<span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p><a href="http://funhacks.net/2017/01/17/singleton/">python中的单例模式</a></p>
<h2 id="数据处理函数">数据处理函数</h2>
<p><strong>读取 矩阵文件</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1">#第一种方法 python 读取矩阵文件</span>

<span class="c1"># 单精度是32 位，双精度是64位</span>
<span class="k">def</span> <span class="nf">read_file</span><span class="p">(</span><span class="n">file1</span><span class="p">):</span>

    <span class="n">f</span> <span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="n">file1</span><span class="p">)</span>
    <span class="n">matrix</span><span class="o">=</span><span class="p">[]</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>

        <span class="n">line</span> <span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">readline</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="p">:</span> <span class="k">break</span>

        <span class="n">line</span><span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="n">line</span> <span class="o">=</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;,&#34;</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">line</span><span class="p">)</span> <span class="c1"># 这里转化成float 就是ok的</span>
        <span class="n">matrix</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="c1"># matrix =numpy.array(matrix)</span>
    <span class="k">return</span> <span class="n">matrix</span>


<span class="c1"># 第二种方法 基于numpy 的实现</span>

<span class="n">path</span> <span class="o">=</span><span class="s2">&#34;text.txt&#34;</span>
<span class="n">matrix</span> <span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">loadtxt</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="n">b</span> <span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">matrix</span><span class="p">,(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="p">)</span>
<span class="n">b</span> <span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">matrix</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>

</code></pre></td></tr></table>
</div>
</div><p><strong>shuffle 函数</strong></p>
<p>只要是打散，都是会用到 shuffle() 这样的一个函数。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 纯python 实现
index= [i for i in range(len(train_x))]
random.shuffle(index)
train_x =train_x[index]
train_y  =train_y[index]

# 基于 numpy 实现

def shuffle_data(data):
    np.random.shuffle(data)
    
    return data

</code></pre></td></tr></table>
</div>
</div><p><strong>按照文件名进行排序</strong></p>
<p>这个是按照字典序排序的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
 
<span class="n">img_path</span><span class="o">=</span><span class="s1">&#39;./img/&#39;</span>
 
<span class="n">img_list</span><span class="o">=</span><span class="nb">sorted</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">img_path</span><span class="p">))</span>	<span class="c1">#文件名按字母排序</span>
<span class="n">img_nums</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">img_list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">img_nums</span><span class="p">):</span>
    <span class="n">img_name</span><span class="o">=</span><span class="n">img_path</span><span class="o">+</span><span class="n">img_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">img_name</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><p><img src="https://s2.ax1x.com/2019/09/15/n2rAbj.png" alt="n2rAbj.png"></p>
<p>注意下面的是按照数字进行排序的，也就是文件名。这种方法更加使用，注意在实现的时候，将 string 转换成了int 类型。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">img_path</span><span class="o">=</span><span class="s1">&#39;./img/&#39;</span>
 
<span class="n">img_list</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">img_path</span><span class="p">)</span>
<span class="n">img_list</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="n">img_list</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]))</span> <span class="c1">##文件名按数字排序</span>
<span class="n">img_nums</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">img_list</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">img_nums</span><span class="p">):</span>
    <span class="n">img_name</span><span class="o">=</span><span class="n">img_path</span><span class="o">+</span><span class="n">img_list</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">img_name</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p><a href="https://imgchr.com/i/n2ruGV"><img src="https://s2.ax1x.com/2019/09/15/n2ruGV.png" alt="n2ruGV.png"></a></p>
<h2 id="库函数">库函数</h2>
<p>（1）heapq
在python 中默认的是一个小根堆（在c++ 中默认的是一个大根堆）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">heapq.heappush(heap, item) 把item添加到heap中（heap是一个列表）
heapq.heappop(heap) 把堆顶元素弹出，返回的就是堆顶
heapq.heappushpop(heap, item) 先把item加入到堆中，然后再pop，比heappush()再heappop()要快得多
# 这比较好用，不用自己维护 pushpop 操作
heapq.nlargest(n, iterable, key=None) 返回最大的n个元素（Top-K问题）
heapq.nsmallest(n, iterable, key=None) 返回最小的n个元素（Top-K问题）
# 如果写成了这样，那么寻找最大K 个元素，瞬间就没有了意义，有没有感觉到
</code></pre></td></tr></table>
</div>
</div><p>（2）dictionary</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">import collections

# 就类似一个计数器了
hash =collections.defaultdict(int);

</code></pre></td></tr></table>
</div>
</div><p>还有一种方式，直接使用 <code>{}</code> 进行表示</p>
<p>（4）stack</p>
<p>python 中没有专门的处理栈库函数，但是栈的操作可以使用list 全部实现。所以当你在使用stack 的时候，基本上就是在使用list</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># python 中的入栈</span>
<span class="n">stack</span> <span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">stack</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

<span class="n">item</span> <span class="o">=</span><span class="n">stack</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span> <span class="c1"># 注意这个是直接返回，stack 中不再存在</span>
</code></pre></td></tr></table>
</div>
</div><p>（5）heap</p>
<p>python 中默认实现的是小根堆。使用库函数 <code>heapq</code> 库函数，其中 <code>heappush()</code> 和 <code>heappop()</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># python 中 heap 的基本操作</span>
<span class="n">heap</span> <span class="o">=</span><span class="p">[]</span> 
<span class="n">heapq</span><span class="o">.</span><span class="n">heappush</span><span class="p">(</span><span class="n">heap</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
<span class="n">val</span> <span class="o">=</span> <span class="n">heapq</span><span class="o">.</span><span class="n">heappop</span><span class="p">(</span><span class="n">heap</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>python 中使用原有库函数实现大根堆。</p>
<blockquote>
<p>使用 heapq 类实现堆，该类默认是小根堆，然后将每个值乘以 -1 从而实现了大根堆、</p>
</blockquote>
<p>（6）deque</p>
<p>注意python中的deque是队列的实现，使用popleft() 表示队头弹出，当使用append() 和普通的list append() 是相同的。默认实现的是双向队列，两端都是可以编辑的。</p>
<p>队列是一种基于先进先出（FIFO）策略的数据结构。在python 中常见的有三种队列：</p>
<ul>
<li>先进先出队列： 尾部进去，头部出来</li>
<li>优先队列：实现大根堆和小根堆，在python 中默认的是大根堆（貌似），按照级别进行弹出</li>
<li>双向队列： 头部和尾部都是可以弹出和弹入，可以在两段进行编辑，所以既可以用来实现stack 也可以用来实现队列
上述三种队列都是有<code>maxlen</code> 属性，那么就可以设置队列的长度。</li>
</ul>
<p>队列中常常使用的方法：</p>
<ul>
<li>入队 <code>q.put(item)</code></li>
<li>出队 <code>item =q.get()</code> ，从队头删除并且返回</li>
<li>返回队列的大小 <code>q.qsize()</code></li>
<li>判断是否为空 <code>q.empty()</code></li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="n">name</span><span class="o">=</span><span class="n">deque</span><span class="p">([</span><span class="s2">&#34;jean&#34;</span><span class="p">,</span><span class="s2">&#34;li&#34;</span><span class="p">,</span><span class="s2">&#34;na&#34;</span><span class="p">])</span>
<span class="n">name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&#34;yang&#34;</span><span class="p">)</span>
<span class="n">name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&#34;chun&#34;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">popleft</span><span class="p">())</span>    <span class="c1">#不可以带参数</span>
<span class="k">print</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
 <span class="n">outputs</span><span class="p">:</span>
<span class="n">jean</span>
<span class="n">deque</span><span class="p">([</span><span class="s1">&#39;li&#39;</span><span class="p">,</span> <span class="s1">&#39;nana&#39;</span><span class="p">,</span> <span class="s1">&#39;yang&#39;</span><span class="p">,</span> <span class="s1">&#39;chun&#39;</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><p>还有一种比较笨的实现方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">q</span> <span class="o">=</span><span class="p">[]</span>
<span class="c1"># 这个是入队操作</span>
<span class="n">q</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
<span class="c1"># 出队</span>
<span class="k">del</span> <span class="n">q</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</code></pre></td></tr></table>
</div>
</div><p>但是时间效率是不一样的， <code>deque.popleft()</code> 是$O(1)$时间复杂度, <code>del q[0]</code> 是$O(n)$ 的时间复杂度。</p>
<h2 id="python-中的数据结构dict-和set-类型">python 中的数据结构Dict 和Set 类型</h2>
<p>（1） Python 中的Dict</p>
<ol>
<li>获取 Dict长度</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">d</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Adam&#39;</span><span class="p">:</span> <span class="mi">95</span><span class="p">,</span>
    <span class="s1">&#39;Lisa&#39;</span><span class="p">:</span> <span class="mi">85</span><span class="p">,</span>
    <span class="s1">&#39;Bart&#39;</span><span class="p">:</span> <span class="mi">59</span>
<span class="p">}</span>
<span class="c1"># 使用len(d) 可以获取长度</span>
</code></pre></td></tr></table>
</div>
</div><ol start="2">
<li>访问Dict中的值</li>
</ol>
<p>下面是两种访问方式</p>
<p>if 判断一下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">if</span> <span class="s1">&#39;Paul&#39;</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
	<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;Paul&#39;</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><p>使用 dict 自带的 get 方法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">d</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;Paul&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><ol start="3">
<li>更新Dict</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">d</span><span class="p">[</span><span class="s1">&#39;Paul&#39;</span><span class="p">]</span> <span class="o">=</span><span class="mi">20</span>
</code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>遍历整个 Dict</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">d</span><span class="p">:</span>
	<span class="k">print</span> <span class="n">key</span>
</code></pre></td></tr></table>
</div>
</div><ol start="5">
<li>Python中 Dict 的特点</li>
</ol>
<p>Dict 查找速度快，但是占用内存大。list占用内存小，但是查找速度慢。</p>
<p>Dict 中的key 是不能重复的，这个性质和 set 很想。</p>
<p>（2）Python 中的set</p>
<p><strong>由于 set 存储的无序集合，所以不能使用索引进行访问</strong></p>
<p>set 中存储的元素和 Dict 中的key类似，必须是不变对象。</p>
<p>判断是否存在 set 中</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="s1">&#39;Bill&#39;</span> <span class="ow">in</span> <span class="n">s</span>
</code></pre></td></tr></table>
</div>
</div><p>set 的更新主要做两件事情：把新的元素放到 set 中； 把已有元素从set 中删除。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">s</span> <span class="o">=</span><span class="nb">set</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="n">s</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="n">s</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span> <span class="c1"># 如果这个时候不存在，那么会保存</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="其他">其他</h2>
<p>python 中 in 操作 在不同的数据集合中的时间复杂度
这个是取决于操作的数据结构：</p>
<ul>
<li>list (tuple) -average: O(N)</li>
<li>set/dict- average: O(1), worst: O(N)</li>
</ul>
<p>(如果 dictionary 所有的值都相同的话，那么时间复杂度就是 O(n))</p>
<blockquote>
<p>The O(n) worst case for sets and dicts is very uncommon, but it can happen if <strong>hash</strong> is implemented poorly. This only happens if everything in your set has the same hash value.</p>
</blockquote>
<table>
<thead>
<tr>
<th>操作</th>
<th>平均情况</th>
<th>最坏情况</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>列表  list</td>
<td>O(n)</td>
<td>O(n)</td>
<td>list 是由数组实现的</td>
</tr>
<tr>
<td>字典  dict</td>
<td>O(1)</td>
<td>O(n)</td>
<td></td>
</tr>
<tr>
<td>集合 set</td>
<td>O(1)</td>
<td>O(n)</td>
<td>内部实现和 dict 很像</td>
</tr>
</tbody>
</table>
<p>python 中表示最大和最小的数字</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">import sys
sys.maxsize #如果是整型
float(‘inf’) # 如果是浮点型
</code></pre></td></tr></table>
</div>
</div><p>python 中 <code>string</code>的切片的时间复杂度，因为python 中<code>string</code>是不可变的，所以切片操作基本上是通过复制完成的，所以时间复杂度一般是 $O(n)$，复制的时候需要申请一个临时的空间，所以空间复杂度基本上也稳定在 $O(n)$。常见的切片操作有三种：</p>
<ul>
<li>str[:] 完全复制，返回的是exact same 的 copy，前后两个变量没有什么关系了</li>
<li>str[1:1]，  mystr[1:1] is mystr[2:2] is '' 是一个空的对象</li>
<li>str[a: b] 其中 $a&lt; b$，最常见的切片复制, make a copy</li>
<li>[::-1] reverse的操作</li>
</ul>
<h3 id="dictionary总结">dictionary总结</h3>
<p><a href="https://towardsdatascience.com/python-pro-tip-start-using-python-defaultdict-and-counter-in-place-of-dictionary-d1922513f747">Python Pro Tip: Start using Python defaultdict and Counter in place of dictionary</a></p>
<blockquote>
<p>However, learning to write a language and writing a language in an optimized way are two different things.</p>
<p>Every Language has some ingredients which make it unique.</p>
<p>知道算法思想，还要非常熟悉一门语言，使其高效地实现。最好的是写出 efficient and readable code.</p>
</blockquote>
<p>一个 user case example：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># 方案一：naive python implementation</span>
<span class="n">text</span> <span class="o">=</span> <span class="s2">&#34;I need to count the number of word occurrences in a piece of text. How could I do that? Python provides us with multiple ways to do the same thing. But only one way I find beautiful.&#34;</span>
<span class="n">word_count_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">word_count_dict</span><span class="p">:</span>
        <span class="n">word_count_dict</span><span class="p">[</span><span class="n">w</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">word_count_dict</span><span class="p">[</span><span class="n">w</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
<span class="c1"># 方案二： use defaultdict </span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="n">word_count_dict</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span> <span class="c1"># 意味着value 是int 类型</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">):</span>
    <span class="n">word_count_dict</span><span class="p">[</span><span class="n">w</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>

<span class="c1"># 方案三：use counter</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="n">word_count_dict</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">()</span>
<span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34; &#34;</span><span class="p">):</span>
    <span class="n">word_count_dict</span><span class="p">[</span><span class="n">w</span><span class="p">]</span><span class="o">+=</span><span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p>方案三是最好的，如果你是统计功能，那么伴随着经常需要使用以下的函数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">word_count_dict.most_common(10) # 统计最常见的10 个单词
</code></pre></td></tr></table>
</div>
</div><p>Other use of <code>Counter</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Count Characters</span>
<span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;abccccccddddd&#39;</span><span class="p">)</span>
<span class="c1"># Count List elements</span>
<span class="n">Counter</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Notice that in <code>Counter</code>, the value is always an integer.</p>
</blockquote>
<p>当 value值不能是 integer的时候，defaultdict comes to rescue</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="c1"># list of tuple</span>
<span class="n">s</span> <span class="o">=</span> <span class="p">[</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;fruit&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;fruit&#39;</span><span class="p">,</span> <span class="s1">&#39;orange&#39;</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;fruit&#39;</span><span class="p">,</span> <span class="s1">&#39;banana&#39;</span><span class="p">)]</span>
<span class="n">d</span> <span class="o">=</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span> <span class="c1"># 意味着value 是list 类型</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

<span class="n">d</span> <span class="o">=</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span> <span class="c1"># 意味着 value 是set 类型</span>
<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">s</span><span class="p">:</span>
    <span class="n">d</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback"># 从结果中可以看出list 和set 的区别， defaultdict 是很好的函数

defaultdict(&lt;class &#39;list&#39;&gt;, {&#39;color&#39;: [&#39;blue&#39;, &#39;orange&#39;, &#39;yellow&#39;], &#39;fruit&#39;: [&#39;banana&#39;, &#39;orange&#39;, &#39;banana&#39;]})
defaultdict(&lt;class &#39;set&#39;&gt;, {&#39;color&#39;: {&#39;blue&#39;, &#39;orange&#39;, &#39;yellow&#39;}, &#39;fruit&#39;: {&#39;banana&#39;, &#39;orange&#39;}})
</code></pre></td></tr></table>
</div>
</div></blockquote>
<ol>
<li>python内置的dictionary</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a_dict</span> <span class="o">=</span><span class="nb">dict</span><span class="p">()</span> <span class="c1"># less pythonic</span>
<span class="n">a_dict</span> <span class="o">=</span><span class="p">{}</span> <span class="c1"># pythonic</span>
<span class="n">a_dict</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;missing_key&#34;</span><span class="p">,</span> <span class="s2">&#34;default value&#34;</span><span class="p">)</span>
</code></pre></td></tr></table>
</div>
</div><p>可以设置default value，当没有相应的key时候。</p>
<ol start="2">
<li>defaultdict 函数</li>
</ol>
<p>当访问 <code>defaultdict</code> 实例对象中不存在的元素时，不会像python 内置<code>dict</code> 中抛出keyError异常。<code>defaultdict</code>中有默认值。该对象的其他属性、方法和内置<code>dict</code> 是一样的。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="nb">issubclass</span><span class="p">(</span><span class="n">defaultdict</span><span class="p">,</span> <span class="nb">dict</span><span class="p">)</span>
<span class="c1"># 是一个很好的工具类函数，辨别出两个class 的从属关系</span>
</code></pre></td></tr></table>
</div>
</div><p>比较一下两种写法</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">word_count</span> <span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">word_count</span><span class="p">:</span>
        <span class="n">word_count</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span><span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">word_count</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span><span class="mi">1</span>

<span class="c1"># 如果使用defaultdict</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="n">word_count</span> <span class="o">=</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">doc</span><span class="o">.</span><span class="n">split</span><span class="p">():</span>
    <span class="n">word_count</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">+=</span><span class="mi">1</span>
</code></pre></td></tr></table>
</div>
</div><p>grouping unique items</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">dep</span> <span class="o">=</span> <span class="p">[(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;John Doe&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;Sales&#39;</span><span class="p">,</span> <span class="s1">&#39;Martin Smith&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;Accounting&#39;</span><span class="p">,</span> <span class="s1">&#39;Jane Doe&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;Marketing&#39;</span><span class="p">,</span> <span class="s1">&#39;Elizabeth Smith&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;Marketing&#39;</span><span class="p">,</span> <span class="s1">&#39;Elizabeth Smith&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;Marketing&#39;</span><span class="p">,</span> <span class="s1">&#39;Adam Doe&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;Marketing&#39;</span><span class="p">,</span> <span class="s1">&#39;Adam Doe&#39;</span><span class="p">),</span>
       <span class="p">(</span><span class="s1">&#39;Marketing&#39;</span><span class="p">,</span> <span class="s1">&#39;Adam Doe&#39;</span><span class="p">)]</span>

<span class="n">dep_dd</span> <span class="o">=</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">set</span><span class="p">)</span>
<span class="k">for</span> <span class="n">department</span><span class="p">,</span> <span class="n">employee</span> <span class="ow">in</span> <span class="n">dep</span><span class="p">:</span>
    <span class="n">dep_dd</span><span class="p">[</span><span class="n">department</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">employee</span><span class="p">)</span>
<span class="n">dep_dd</span>
<span class="c1"># 如果想要继续遍历</span>
<span class="k">for</span> <span class="n">department</span><span class="p">,</span> <span class="n">employee</span> <span class="ow">in</span> <span class="n">dep_dd</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
  <span class="k">print</span><span class="p">(</span><span class="n">department</span><span class="p">,</span> <span class="n">employee</span><span class="p">)</span>

<span class="c1"># value 的数值是 float</span>
<span class="n">dd</span> <span class="o">=</span><span class="n">defaultdict</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>这个功能还是非常常见的，将不同的数据按照key 进行group 起来</p>
</blockquote>
<ol start="3">
<li>
<p>orderedDict</p>
<p><a href="https://stackoverflow.com/questions/39980323/are-dictionaries-ordered-in-python-3-6">Are dictionaries ordered in Python 3.6+?</a></p>
<p>如果要 remember the order keys are added to a dictionary，建议使用 orderedDict；python3.6 是自带这种特效；为了提升兼容性，还是建议使用 orderedDict</p>
</li>
</ol>
<h3 id="set-总结">set 总结</h3>
<ol>
<li>定义</li>
</ol>
<blockquote>
<p>A set is an unordered collection of items. Every set element is unique (no duplicates) and must be immutable (cannot be changed).</p>
</blockquote>
<ol start="2">
<li>set 的增删改查</li>
</ol>
<blockquote>
<p>Empty curly braces <code>{}</code> will make an empty dictionary in Python. To make a set without any elements, we use the <code>set()</code> function without any argument.</p>
<p>如果想要创建空set，那么使用的是 set()；使用 {} 得到的是dictionary</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">a</span> <span class="o">=</span><span class="p">{}</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="n">b</span> <span class="o">=</span><span class="nb">set</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">b</span><span class="p">))</span>
</code></pre></td></tr></table>
</div>
</div><p>可以使用<code>{}</code> 去创建非空的set</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">my_set = {1, 2, [3, 4]}
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Sets are mutable. However, since they are unordered, indexing has no meaning.</p>
</blockquote>
<blockquote>
<p>We can add a single element using the <code>add()</code> method, and multiple elements using the <code>update()</code> method. The <code>update()</code> method can take <a href="https://www.programiz.com/python-programming/tuple">tuples</a>, lists, <a href="https://www.programiz.com/python-programming/string">strings</a> or other sets as its argument. In all cases, duplicates are avoided.</p>
<p>对于set 的add(), update() 方法</p>
</blockquote>
<blockquote>
<p>The only difference between the two is that the <code>discard()</code> function leaves a set unchanged if the element is not present in the set. On the other hand, the <code>remove()</code> function will raise an error in such a condition (if element is not present in the set).</p>
<p>删除一个元素使用 remove() 和 discard() 方法</p>
</blockquote>
<blockquote>
<p>Similarly, we can remove and return an item using the <code>pop()</code> method. Since set is an unordered data type, there is no way of determining which item will be popped. It is completely arbitrary.</p>
<p>We can also remove all the items from a set using the <code>clear()</code> method.</p>
<p>pop() 会return 一个element，但是随机的；clear 是清除所有的元素。</p>
</blockquote>
<ol start="3">
<li>set operation</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="c1"># Set union method</span>
<span class="c1"># initialize A and B</span>
<span class="n">A</span> <span class="o">=</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">}</span>
<span class="n">B</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">}</span>

<span class="c1"># 1. union operation</span>
<span class="k">print</span><span class="p">(</span> <span class="n">A</span> <span class="o">|</span><span class="n">B</span><span class="p">)</span>
<span class="n">A</span><span class="o">.</span><span class="n">union</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="c1"># 2. intersection</span>
<span class="k">print</span><span class="p">(</span> <span class="n">A</span> <span class="o">&amp;</span> <span class="n">B</span><span class="p">)</span>
<span class="n">A</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="c1"># 3. set difference</span>
<span class="k">print</span><span class="p">(</span><span class="n">A</span> <span class="o">-</span><span class="n">B</span><span class="p">)</span>
<span class="n">A</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

<span class="c1"># 4. symmetric_difference() 其实就是异或含义</span>
<span class="k">print</span><span class="p">(</span><span class="n">A</span><span class="o">^</span><span class="n">B</span><span class="p">)</span>
<span class="c1"># 这两个结果是一样的</span>
<span class="n">A</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="n">B</span><span class="o">.</span><span class="n">symmetric_difference</span><span class="p">(</span><span class="n">A</span><span class="p">)</span>

</code></pre></td></tr></table>
</div>
</div><ol start="4">
<li>access items</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="n">set1</span> <span class="o">=</span><span class="p">{</span><span class="s2">&#34;apple&#34;</span><span class="p">,</span> <span class="s2">&#34;banana&#34;</span><span class="p">,</span> <span class="s2">&#34;cherry&#34;</span><span class="p">}</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">set1</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">set1</span><span class="p">))</span> <span class="c1"># 获取长度</span>
</code></pre></td></tr></table>
</div>
</div><p>其他的函数</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-python" data-lang="python"><span class="nb">all</span><span class="p">()</span>  <span class="c1"># returns True if all elements of the set are true (or if the set is empty)</span>
<span class="nb">any</span><span class="p">()</span>  <span class="c1"># returns True if any element of the set is true. If the set is empty, return False.</span>
</code></pre></td></tr></table>
</div>
</div>
    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">jijeng</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">
        2019-01-09
        
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="http://47.94.35.231:9998/blog_imgs/wechatpay.png">
        <span>微信打赏</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="http://47.94.35.231:9998/blog_imgs/alipay.png">
        <span>支付宝打赏</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/python/">python</a>
          </div>
      <nav class="post-nav">
        <a class="prev" href="/post/offer_other_1/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">剑指offer-其他(1)</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        <a class="next" href="/post/cpp_tutorial_1/">
            <span class="next-text nav-default">C&#43;&#43; 编程语言（一）</span>
            <span class="next-text nav-mobile">下一篇</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        

  

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:your@email.com" class="iconfont icon-email" title="email"></a>
      <a href="http://localhost:1313" class="iconfont icon-github" title="github"></a>
      <a href="http://localhost:1313" class="iconfont icon-weibo" title="weibo"></a>
      <a href="http://localhost:1313" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="http://jijeng.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2018 - 
    2021<span class="heart"><i class="iconfont icon-heart"></i></span><span>jijeng</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.c12618f9a600c40bd024996677e951e64d3487006775aeb22e200c990006c5c7.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
